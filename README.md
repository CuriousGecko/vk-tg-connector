## VK-TG connector - —ç—Ç–æ Telegram-–±–æ—Ç, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.

![head.jpg](images%2Fgithub%2Fhead.jpg)
![Alchemy](images%2Fgithub%2Falchemy_badge.png)
![Python](https://img.shields.io/badge/Python-14354C?style=for-the-badge&logo=python&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)
![Vk](https://img.shields.io/badge/–≤–∫–æ–Ω—Ç–∞–∫—Ç–µ-%232E87FB.svg?&style=for-the-badge&logo=vk&logoColor=white)
![Telegram](https://img.shields.io/badge/Telegram-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white)
![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white)

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤.
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Vk –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞—Ç—ã.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö.

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é Docker:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker-compose. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å Docker.

2. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram —Å –ø–æ–º–æ—â—å—é @BotFather (–ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ).

3. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ —É–¥–æ–±–Ω—É—é –¥–ª—è –≤–∞—Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

    ```bash
    git clone git@github.com:CuriousGecko/vk-tg-connector.git
    ```

    ```bash
    cd vk-tg-connector/infra
    ```

4. –ù–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª env.docker —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

   _**–í–ê–ñ–ù–û: –¥–µ—Ä–∂–∏—Ç–µ –≤–∞—à–∏ —Ç–æ–∫–µ–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏ –≤ —Å–µ–∫—Ä–µ—Ç–µ, –Ω–∏–≥–¥–µ –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ –∏—Ö –∏ –Ω–∏–∫–æ–º—É –Ω–µ –ø–µ—Ä–µ—Å—ã–ª–∞–π—Ç–µ!**_

   **VK_ID** # –≤–∞—à id –≤ Vk.

   **VK_ACCESS_TOKEN** # —É–∫–∞–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Vk, –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã —Ä–∞–∑—Ä–µ—à–∏–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –ª–∏—á–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º, —Å–ø–∏—Å–∫—É –¥—Ä—É–∑–µ–π –∏ –ø—Ä–æ—á–∏–º –¥–∞–Ω–Ω—ã–º. –ú–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è [–≥–æ—Ç–æ–≤—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º](https://oauth.vk.com/authorize?client_id=2685278&scope=1073737727&redirect_uri=https://api.vk.com/blank.html&display=page&response_type=token&revoke=1). –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞, –≤ –æ—Ç–∫—Ä—ã–≤—à–µ–π—Å—è –≤–∫–ª–∞–¥–∫–µ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ —Å—Å—ã–ª–∫—É —Ü–µ–ª–∏–∫–æ–º, –ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ access_token.
   
   **TELEGRAM_CHAT_ID** # –≤–∞—à id –≤ Telegram. –ú–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —É @userinfobot.

   **TELEGRAM_BOT_TOKEN** # —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –≤—ã–¥–∞–Ω–Ω—ã–π @BotFather.

   **LOG_LEVEL** # —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR –∏–ª–∏ CRITICAL)
   
   **READ_NOTIFICATION_MODE** # –≤ –∫–∞–∫–æ–º –≤–∏–¥–µ –ø—Ä–∏–¥–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Vk –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

   ```
   2 # –≤ –≤–∏–¥–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ.

   1 # –Ω–∞ –≤–∞—à–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –≤ Telegram –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ä–µ–∞–∫—Ü–∏—è üëÄ.

   0 # —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã.
   ```
   
   **POSTGRES_USER** # —É–∫–∞–∂–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î PostgreSQL.

   **POSTGRES_PASSWORD** # –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å.

   **POSTGRES_DB** # –Ω–∞–∑–≤–∞–Ω–∏–µ –ë–î.

   **POSTGRES_PORT** # –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è. –¢–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ docker-compose.yml

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

    ```bash
    sudo docker compose -f docker-compose.yml up
    ```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ Docker (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram —Å –ø–æ–º–æ—â—å—é @BotFather (–ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ).
   
2. –°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ —É–¥–æ–±–Ω—É—é –¥–ª—è –≤–∞—Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

    ```bash
    git clone git@github.com:CuriousGecko/vk-tg-connector.git
    ```

    ```bash
    cd vk-tg-connector
    ```

3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ env.dev –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ .env:
   
   ```bash
   cp dev/env.dev .env
   ```

4. –ù–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª .env —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–æ–ø–∏—Å–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–∞–∑–¥–µ–ª–µ). –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

   **USE_POSTGRES** # –≤—ã–±–æ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

   ```
   True: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL.

   False: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è SQLite (–≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã POSTGRES –±—É–¥—É—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è).
   ```

   **POSTGRES_HOST** # —Ö–æ—Å—Ç (—É–∫–∞–∂–∏—Ç–µ localhost –∏–ª–∏ ip, –≥–¥–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –ë–î. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å db_postgres –¥–ª—è Docker).

   **POSTGRES_PORT** # –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5432).

   **POSTGRES_DB** # –Ω–∞–∑–≤–∞–Ω–∏–µ –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é chats).

   **ECHO** # –≤—ã–≤–æ–¥ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª (True|False, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é False).

5. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

   ```bash
   python -m venv venv
   ```
   
6. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

   –ï—Å–ª–∏ —É –≤–∞—Å Windows:

   ```bash
   source venv/scripts/activate
   ```

   Linux/macOS:

   ```bash
   source venv/bin/activate
   ```

7. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

   ```bash
   pip install -r requirements.txt
   ```

8. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

   ```bash
   python connector.py
   ```
   
### –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–æ—Ç–æ–º.

–î–ª—è –≤—ã–∑–æ–≤–∞ –±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –∫–æ–º–∞–Ω–¥—É /start

![screen_start.png](images%2Fgithub%2Fscreen_start.png)

–í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –±–æ—Ç–æ–º –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –µ–≥–æ –≤–ª–∞–¥–µ–ª–µ—Ü.

![screen_access_denied.png](images%2Fgithub%2Fscreen_access_denied.png)

–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞ –≤–≤–µ–¥–∏—Ç–µ **/** –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É.

![screen_commands.png](images%2Fgithub%2Fscreen_commands.jpg)

### –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è "–∫–∞–∫ –µ—Å—Ç—å", –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–∞—Ä–∞–Ω—Ç–∏–π, —è–≤–Ω—ã—Ö –∏–ª–∏ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ–º—ã—Ö. –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±–æ–π —É—â–µ—Ä–±, –≤–æ–∑–Ω–∏–∫—à–∏–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –ª—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å —ç—Ç–∏–º –æ—Ç–∫–∞–∑–æ–º –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

–ê–≤—Ç–æ—Ä –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è
–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ python-telegram-bot –∏ SQLAlchemy.
–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ requirements.txt.

–ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞: –õ–µ–æ–Ω–∏–¥ –¶—ã–±—É–ª—å—Å–∫–∏–π
